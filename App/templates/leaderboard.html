{% extends "layout.html" %}
{% set active_tab = 'leaderboards' %}

{% block title %}Leaderboards{% endblock %}

{% block styles %}
  {{ super() }}
   <link rel="stylesheet" href="{{ url_for('static', filename='student_leaderboard.css') }}">
{% endblock %}

{% block navbar %}
<nav class="student-nav">
  <div class="nav-wrapper">
    <a class="brand-logo left">
      {% if viewer_is_student and current_user %}
        Welcome {{ current_user.student_id }}!
      {% else %}
        Leaderboards
      {% endif %}
    </a>

    <ul id="nav-mobile" class="right">
      

      <li>
        <a href="{{ url_for('index_views.student_home_page') }}"
           class="{% if active_tab == 'home' %}active-tab{% endif %}">
          Home
        </a>
      </li>

      <li>
        <a href="{{ url_for('index_views.leaderboard_page') }}"
           class="{% if active_tab == 'leaderboards' %}active-tab{% endif %}">
          Leaderboards
        </a>
      </li>

      <li>
        <a href="{{ url_for('index_views.student_accolades_page') }}"
           class="{% if active_tab == 'accolades' %}active-tab{% endif %}">
          Accolades
        </a>
      </li>

      {# temporary History placeholder, but with correct HTML #}
      <li>
        <a href="#"
           class="{% if active_tab == 'history' %}active-tab{% endif %}">
          History
        </a>
      </li>

      <li>
        <a href="{{ url_for('auth_views.logout_action') }}">Log Out</a>
      </li>
    </ul>
  </div>
</nav>
{% endblock %}

{% block content %}
<div class="leaderboard-page">

  <div class="header-card">
    <div class="header-text">Student Hour Rankings</div>
  </div>

  <div class="list-card">
    {% for s in leaders %}
    <div class="leader-row">

      <div class="leader-left">
        

        <div>
          <div class="leader-name">{{ s.name }}</div>
          <div class="leader-hours">
            Completed {{ "%.1f"|format(s.hoursAccumulated or 0) }} hours
          </div>
        </div>
      </div>

      <div class="leader-middle">
        <div class="leader-label">Accolades</div>
        <div class="leader-badges">
          {% if s.accolades %}
            {% for a in s.accolades %}
              <span class="badge-icon">{{ a[0] }}</span>
            {% endfor %}
          {% else %}
            <span class="no-accolades">None yet</span>
          {% endif %}
        </div>
      </div>

      <div class="leader-right">{{ loop.index }}</div>

    </div>
    {% endfor %}
  </div>

  {% if viewer_is_student %}
  <div class="leader-footer">
    <span>Completed Hours: {{ "%.1f"|format(user_hours or 0) }}</span>
    <span>Your Rank: {{ user_rank if user_rank else "â€”" }}</span>
  </div>
  {% endif %}

</div>
{% endblock %}
